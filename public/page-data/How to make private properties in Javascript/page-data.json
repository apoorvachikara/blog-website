{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/How to make private properties in Javascript/",
    "result": {"data":{"site":{"siteMetadata":{"title":"One Stop for JS full-stack"}},"markdownRemark":{"id":"593307c7-bbeb-5c94-a7f7-3d2dd531b6f1","excerpt":"Introduction You can’t directly create private properties, but if you use classes you can now create them with one symbol. However, this blog is not targeted to…","html":"<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/bdcd8214bd11cfde218b60e6049e7ff4/b17f8/js-object-props.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 29.746835443037973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAABA//aAAwDAQACEAMQAAABjcZs4j//xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIDESP/2gAIAQEAAQUCi7DoSVu//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAECAQE/Aauv/8QAGhAAAQUBAAAAAAAAAAAAAAAAAAECERIhMv/aAAgBAQAGPwKLadGPQ//EABsQAAIDAAMAAAAAAAAAAAAAAAEhADFBEeHw/9oACAEBAAE/IRCpL4gB2GdwdQvZP//aAAwDAQACAAMAAAAQdB//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QEE7X/8QAHRAAAQQCAwAAAAAAAAAAAAAAAQARIVExQWFxof/aAAgBAQABPxA6woXX5CCuWZVyDt0o4BAs29p//9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"imagenode\" title=\"imagenode\" src=\"/static/bdcd8214bd11cfde218b60e6049e7ff4/828fb/js-object-props.jpg\" srcset=\"/static/bdcd8214bd11cfde218b60e6049e7ff4/ff44c/js-object-props.jpg 158w,\n/static/bdcd8214bd11cfde218b60e6049e7ff4/a6688/js-object-props.jpg 315w,\n/static/bdcd8214bd11cfde218b60e6049e7ff4/828fb/js-object-props.jpg 630w,\n/static/bdcd8214bd11cfde218b60e6049e7ff4/0ede0/js-object-props.jpg 945w,\n/static/bdcd8214bd11cfde218b60e6049e7ff4/3ac88/js-object-props.jpg 1260w,\n/static/bdcd8214bd11cfde218b60e6049e7ff4/b17f8/js-object-props.jpg 1600w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h2>Introduction</h2>\n<p>You can’t directly create private properties, but if you use classes you can now create them with one symbol. However, this blog is not targeted to use only one way to declare them. We will discuss different methods to achieve and when to use what.</p>\n<h3>Scoped Variables</h3>\n<p>Scoping is one of the most important aspects of Javascript to understand how things work behind the scene. Although this blog won’t include details about the different scopes in JS, it is important to understand them.</p>\n<p>So, you should understand the scope before reading the scope variable (<a href=\"https://blog.bitsrc.io/understanding-scope-and-scope-chain-in-javascript-f6637978cf53\">here</a>).</p>\n<p>Let’s take an example to understand it. We have a function area and it gives us the calculated area.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function area (width, breadth) {\n    this.width = width;\n    this.breadth = breadth;\n    this.areaCalculate = function () {\n        return this.breadth * this.width;\n    }\n}\nconst areaRec = new area(10, 20);\nconsole.log(areaRec.areaCalculate()); // 200\n\nareaRec.width = 20; // able to change th width\nconsole.log(areaRec.areaCalculate()); // 400</code></pre></div>\n<p>Now, the above function is fine and it can calculate the area well with no errors or anything. However, you can update the properties on the <code class=\"language-text\">areaRec</code> object and calculate with different <code class=\"language-text\">width</code> and <code class=\"language-text\">breadth</code>.</p>\n<p><strong>How to make the width and breadth properties private so you can’t modify it ?</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function area (width, breadth) {\n    return function () {\n        const wtd = width;\n        const brdh = breadth;\n        return wtd * brdh;\n    }\n}\n\nconst areaSquare = new area(10, 10)();\nconsole.log(areaSquare); // 100;\n\nareaSquare.width // undefined;</code></pre></div>\n<p>So, now <code class=\"language-text\">width</code> and <code class=\"language-text\">breadth</code> are private to the instance we create.  This way you can create multiple private properties, you can also use getter setter way to achieve this.</p>\n<h3>Symbols</h3>\n<p>Symbols are a new primitive type added in JS, you may know it already and use it. It helps to create some sort of private property, but not exactly private. They are private to the objects i.e they are not enumerable. Let’s see what I am trying to say:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const sym1 = Symbol('Sort Of Private Properties');\nconst testObj = {\n    [sym1]: 'Private Properties',\n    name: 'Symbols'\n}\nconsole.log(testObj) // {name: 'Symbols', Symbol(Sort Of Private Properties): 'Private Properties'}\nconsole.log(testObj[sym1]) // 'Private Properties'</code></pre></div>\n<p>When you print <code class=\"language-text\">testObj</code>, you will be able to see it. If you know the symbol, you can access it on the object and what if you don’t know it exists? We use <code class=\"language-text\">Object.keys(testObj)</code> to get all the keys.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Object.keys(testObj); // ['name'];\n\nObject.getOwnPropertySymbol(testObj) // [Symbol(Sort Of Private Properties)]</code></pre></div>\n<p>So, the <code class=\"language-text\">symbol</code> properties are not given by <code class=\"language-text\">Object.keys</code> as they are not enumerable. It sorts of creates the hidden properties on objects instead of a private one.</p>\n<h3>Closures</h3>\n<p>One of the most asked questions in the interview. One of the scariest features of JS, Is It? Yes, kind of, but once you get it I believe you will feel comfortable, I won’t say you become master (I want to change this perspective though).</p>\n<p>Unknowingly, many of us have used it, but we don’t know about it. So, without wasting much time let’s start.</p>\n<p><strong>A closure is the combination of a function bundled together(enclosed) with references to its surrounding state(the lexical environment)</strong></p>\n<p>OMG! what is it? So, In simple terms, a closure gives you access to an outer function’s scope from an inner function (this sounds better any day).</p>\n<p>It is a wide topic to understand and I believe I can write one blog for it, but at the moment we will understand how to use closure to create private variables.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function _privateVariables() {\n        let sum = 0;\n        return function (a, b) {\n            sum = a+b;\n            return sum;\n        }\n}\n\nconsole.dir(_privateVariables()); // see the image below</code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e0aede3aa970998a3bcfe17b25e5a9ee/13a9a/closure.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 34.810126582278485%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQoz5WQgW6EIAyGff+XXDKnCAwQQcBT+BZdLku2y3LXpKU05ftbum3bUb1ifBNopZA2c1SgNVprcKXf5zPWnSEOgagDt/340/AK7AIex4ETjllYvPMYa3Fz4NMnav2Z8Flwt+87SmtGMTFJiZQa6yMmNuqvle/gR/e7d7VWZjMjhgljLFJKjDHEsBBjfPjoP7/+cMsb6kNjnSeEgLWWlDKn2KvWnVRvPUpppkkyDCPvfY8QgpTSJeD9QlxXYlwpS6H4zJoSt1IopVz1c5ucM1+CkyQEePpzvAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"imagenode\" title=\"imagenode\" src=\"/static/e0aede3aa970998a3bcfe17b25e5a9ee/f058b/closure.png\" srcset=\"/static/e0aede3aa970998a3bcfe17b25e5a9ee/c26ae/closure.png 158w,\n/static/e0aede3aa970998a3bcfe17b25e5a9ee/6bdcf/closure.png 315w,\n/static/e0aede3aa970998a3bcfe17b25e5a9ee/f058b/closure.png 630w,\n/static/e0aede3aa970998a3bcfe17b25e5a9ee/13a9a/closure.png 637w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>You can clearly see in the image that we have different scopes created in the function, at the moment we will only discuss about the closure scope.</p>\n<p>We see <code class=\"language-text\">sum = 0</code> in the closure scope as it is being used by the inner function, but what if we don’t have closure? Of course, there will be a reference error.</p>\n<h4>In-depth working</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function _privateVariables() {\n        let sum = 0;\n        return function (a, b) {\n            sum = a+b;\n            return sum;\n        }\n}\n\nconst inner = _privateVariables();\nconsole.log(inner(10, 30)); // 40</code></pre></div>\n<p>When the above code snippet executes, prints <code class=\"language-text\">40</code> i.e sum = 40. Here scope refers to the current execution scope (i.e what is currently being executed on the stack). Let’s see step by step:</p>\n<ul>\n<li>The function <code class=\"language-text\">_privateVariables()</code> will be pushed to the stack and executed (simple shorter version);</li>\n<li>At this time when the inner function is returned the closure scope is created and returned</li>\n<li>Now, when the interpreter reaches <code class=\"language-text\">inner(10, 30)</code> push it to stack and execute it</li>\n<li>The addition of <code class=\"language-text\">a+b</code> will be assigned to sum and it is first checked in function scope if not found then in the scopes</li>\n<li>So, the sum is present in the scope under closure then its value will be read and assigned the new value and returned</li>\n</ul>\n<p>It seems a lot is going on, but this is what happens every time we create a closure and <strong>it is only created when you return the function that has the variable-value bindings that existed in returned function</strong></p>\n<h3>ES6 Class syntax</h3>\n<p>ES6 class has been introduced along back now, but new features are being added in every release. However, <code class=\"language-text\">private class variable</code> was released in ES2020 though there are a few people who are still using or aware of it.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class PrivateVariable {\n    #i_Am_Private = 'version_1'\n    constructor() {\n        this.name = \"avtechstand\";\n    }\n\n    get #version() {\n        return this.#i_Am_Private\n    }\n\n    get version_Public() {\n        return this.#i_Am_Private\n    }\n}\n\nconst pv = new PrivateVariable();\nconsole.log(pv.name) // \"avtechstand\"\nconsole.log(pv.#version)); // Syntax Error\nconsole.log(pv.version_Public); // \"version_1\"</code></pre></div>\n<p>Those who don’t use class and use a lot of private variables can start using es6 classes much cleaner and easier to use. The only thing to make a private variable is to use <code class=\"language-text\">#</code> in front of the variable and it is considered private.</p>\n<h3>Interview Questions</h3>\n<ol>\n<li>what will be the o/p?</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let count = 0;\n(function selfInvokingFunc() {\n  if (count === 0) {\n    let count = 1;\n    console.log(count); // o/p\n  }\n  console.log(count); // o/p\n})();</code></pre></div>\n<p>The o/p will be <code class=\"language-text\">1 and 0</code>. The first log will take the value of the count from its immediate scope and the second log will refer to the global or window scope to get the count value.</p>\n<ol start=\"2\">\n<li>What is the o/p?</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function createIncrement() {\n  let count = 0;\n  function increment() { \n    count++;\n  }\n  let message = `Count is ${count}`;\n  function log() {\n    console.log(message);\n  }\n  \n  return [increment, log];\n}\nconst [increment, log] = createIncrement();\nincrement(); \nincrement(); \nincrement(); \nlog(); // o/p</code></pre></div>\n<p>So, the o/p will be  <code class=\"language-text\">Count is 0</code>. It is because the increment increases the counter, but the value of the message is stored in the closure before updating it i.e count won’t update in the message we update that using <code class=\"language-text\">increment</code>; you can check this in the below code.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function createIncrement() {\n  let count = 0;\n  function increment() { \n    count++;\n  }\n  let message = `Count is ${count}`;\n  function log() {\n    console.log(message);\n  }\n\n  function counter() {\n      return count;\n  }\n    \n  return [increment, log, counter];\n}\nconst [increment, log, counter] = createIncrement();\nincrement(); \nincrement(); \nincrement(); \nlog(); // Count is 0\ncounter(); // 3</code></pre></div>","frontmatter":{"title":"How to make private properties in Javascript?","date":"March 16, 2022","description":"We often need to make properties private in Javascript. We have different options to achieve the same and this blog will you learn them and use them in real scenario"}},"previous":{"fields":{"slug":"/Javascript useful Object methods - Part I/"},"frontmatter":{"title":"Javascript Object methods - Part 1"}},"next":null},"pageContext":{"id":"593307c7-bbeb-5c94-a7f7-3d2dd531b6f1","previousPostId":"4403d5bf-0dee-5ea4-a9cb-a04ebb49a317","nextPostId":null}},
    "staticQueryHashes": ["2841359383","3257411868"]}